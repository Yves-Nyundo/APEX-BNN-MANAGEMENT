<!-- templates/analysis/business_outlook.html -->
{% extends "base.html" %}
{% block title %}Business Outlook{% endblock %}

{% block content %}
<div class="container-wrapper">
  <div class="main-content">

    <h1 class="text-2xl font-bold mb-6">Business Outlook</h1>

    <div class="bg-green-100 p-6 rounded-lg shadow mb-8">
      <h2 class="text-lg font-semibold">Upcoming Invoices (Pending)</h2>
      <p class="text-2xl font-bold">{{ upcoming_invoices|length }}</p>
    </div>

    <div class="bg-white p-6 rounded-lg shadow mb-8">
      <h2 class="text-xl font-semibold mb-4">Upcoming Payments</h2>
      {% if upcoming_invoices %}
      <div class="overflow-x-auto">
        <table class="min-w-full">
          <thead class="bg-gray-200">
            <tr>
              <th class="px-4 py-2">Invoice #</th>
              <th class="px-4 py-2">Client</th>
              <th class="px-4 py-2">Amount</th>
              <th class="px-4 py-2">Due Date</th>
            </tr>
          </thead>
          <tbody>
            {% for inv in upcoming_invoices %}
            <tr class="border-b">
              <td class="px-4 py-2">{{ inv.invoice_number }}</td>
              <td class="px-4 py-2">{{ inv.client.name }}</td>
              <td class="px-4 py-2">${{ "%.2f"|format(inv.total_amount) }}</td>
              <td class="px-4 py-2">{{ inv.due_date.strftime('%Y-%m-%d') if inv.due_date else 'N/A' }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% else %}
      <p>No pending invoices due soon.</p>
      {% endif %}
    </div>

    <div class="bg-gray-50 p-6 rounded-lg shadow">
      <h2 class="text-xl font-semibold mb-4">Next Steps</h2>
      <ul class="list-disc pl-5 space-y-2">
        <li>Follow up on overdue invoices</li>
        <li>Prepare for upcoming deliveries</li>
        <li>Review bid pipeline for next quarter</li>
        <li>Optimize inventory based on forecasted demand</li>
      </ul>
    </div>

  </div>
</div>
{% endblock %}